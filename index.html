<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>Chatran ML</title>
<style>
body { font-family:sans-serif; background:#0b1b2b; color:#e0f7fa; display:flex; flex-direction:column; align-items:center; }
#chatbox { width:80%; max-width:700px; height:70vh; background:#112f44; overflow-y:auto; padding:15px; border-radius:10px; margin-top:20px; }
.message { margin:5px 0; padding:10px; border-radius:10px; max-width:80%; }
.user { background:#065a82; align-self:flex-end; }
.bot { background:#0277bd; align-self:flex-start; }
#inputRow { display:flex; width:80%; max-width:700px; margin-top:10px; }
#userInput { flex:1; padding:10px; border-radius:10px; border:none; outline:none; background:#093143; color:#e0f7fa; }
#sendBtn { background:#00bcd4; color:#002430; border:none; padding:10px 20px; margin-left:5px; border-radius:10px; cursor:pointer; }
</style>
</head>
<body>

<div id="chatbox"></div>
<div id="inputRow">
  <input id="userInput" placeholder="Ù¾ÛŒØ§Ù…ØªÙˆ Ø¨Ù†ÙˆÛŒØ³...">
  <button id="sendBtn">Ø§Ø±Ø³Ø§Ù„</button>
</div>

<script>
// Ø¯Ø§Ø¯Ù‡ JSON (Ù…ÛŒØªÙˆÙ†Ù‡ Ø§Ø² data.json Ù„ÙˆØ¯ Ø¨Ø´Ù‡)
const data = [
  {"input": "Ø³Ù„Ø§Ù…", "output": "Ø³Ù„Ø§Ù…! Ú†Ø·ÙˆØ±ÛŒ Ø±ÙÛŒÙ‚ØŸ"},
  {"input": "Ú†Ø·ÙˆØ±ÛŒØŸ", "output": "Ù…Ù† Ø®ÙˆØ¨Ù…ØŒ ØªÙˆ Ú†Ø·ÙˆØ±ÛŒØŸ"},
  {"input": "Ø®Ø¯Ø§Ø­Ø§ÙØ¸", "output": "ÙØ¹Ù„Ø§Ù‹! Ù…Ø±Ø§Ù‚Ø¨ Ø®ÙˆØ¯Øª Ø¨Ø§Ø´."},
  {"input": "Ù…Ø±Ø³ÛŒ", "output": "Ø®ÙˆØ§Ù‡Ø´ Ù…ÛŒÚ©Ù†Ù…!"},
  {"input": "Ú©Ø¯ HTML", "output": "Ù…ÛŒØ®ÙˆØ§ÛŒ Ø¨Ø±Ø§Øª ÛŒÙ‡ Ú©Ø¯ HTML Ø¨Ù†ÙˆÛŒØ³Ù…ØŸ"}
];

// Ø­Ø§ÙØ¸Ù‡ Ú©ÙˆØªØ§Ù‡ Ù…Ø¯Øª
let history = [];

// Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù…
function addMessage(text, cls){
  const div=document.createElement("div");
  div.className="message "+cls;
  div.textContent=text;
  chatbox.appendChild(div);
  chatbox.scrollTop=chatbox.scrollHeight;
}

// Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ù¾Ø§Ø³Ø® Ø¨Ø§ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø³Ø§Ø¯Ù‡ ML-like
function getResponse(msg){
  msg = msg.toLowerCase().trim();
  
  // ØªØ·Ø¨ÛŒÙ‚ Ø¯Ù‚ÛŒÙ‚ ÛŒØ§ Ù†Ø²Ø¯ÛŒÚ©
  let bestMatch = null;
  let maxScore = 0;
  data.forEach(item => {
    let score = 0;
    item.input.split(" ").forEach(word => { if(msg.includes(word)) score++; });
    if(score > maxScore){ maxScore = score; bestMatch = item; }
  });

  if(bestMatch) return bestMatch.output;

  // Ø­Ø¯Ø³ ØªØ±Ú©ÛŒØ¨ÛŒ Ø³Ø§Ø¯Ù‡
  const subjects = ["Ù…Ù†","ØªÙˆ","Ø§Ùˆ","Ù…Ø§","Ø´Ù…Ø§"];
  const verbs = ["Ù…ÛŒâ€ŒÙÙ‡Ù…Ù…","Ù…ÛŒâ€ŒØ¯Ø§Ù†Ù…","Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù…","ØªØ­Ù„ÛŒÙ„ Ù…ÛŒâ€ŒÚ©Ù†Ù…","Ù…ÛŒâ€ŒØ³Ø§Ø²Ù…"];
  const objects = ["Ø¬Ù…Ù„Ù‡â€ŒØ§Øª Ø±Ø§","Ù…ÙˆØ¶ÙˆØ¹Øª Ø±Ø§","Ù…ØªÙ†Øª Ø±Ø§","Ø­Ø±ÙØª Ø±Ø§"];
  const s = subjects[Math.floor(Math.random()*subjects.length)];
  const v = verbs[Math.floor(Math.random()*verbs.length)];
  const o = objects[Math.floor(Math.random()*objects.length)];
  return `${s} ${v} ${o} ðŸ”¹`;
}

// Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…
function sendMessage(){
  const msg = input.value.trim();
  if(!msg) return;
  addMessage(msg,"user");
  input.value="";
  const res = getResponse(msg);
  history.push({user:msg,bot:res});
  addMessage(res,"bot");
}

const input=document.getElementById("userInput");
const sendBtn=document.getElementById("sendBtn");
const chatbox=document.getElementById("chatbox");

sendBtn.onclick=sendMessage;
input.onkeypress=(e)=>{if(e.key==="Enter")sendMessage();};
</script>

</body>
</html>
