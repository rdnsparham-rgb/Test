<!doctype html>
<html lang="fa">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>chatran</title>
<style>
  body{margin:0;font-family:Tahoma, Arial, sans-serif;background:#0f1724;color:#e6eef8;display:flex;justify-content:center;align-items:center;height:100vh}
  #chatbox{width:760px;height:780px;background:linear-gradient(180deg,#0b1220, #0f2638);border-radius:12px;padding:18px;box-shadow:0 10px 30px rgba(2,6,23,0.6);display:flex;flex-direction:column}
  #messages{flex:1;overflow-y:auto;padding:10px;border-radius:8px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));margin-bottom:12px}
  .msg{margin:8px 0;max-width:85%;padding:10px 12px;border-radius:10px;line-height:1.45}
  .user{align-self:flex-end;background:linear-gradient(90deg,#293241,#394e6b);color:#dfe9ff;text-align:right}
  .bot{align-self:flex-start;background:linear-gradient(90deg,#0b9ea8,#066b81);color:#e9f7fa;text-align:left}
  #inputArea{display:flex;gap:8px}
  #userInput{flex:1;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit}
  #sendBtn{padding:10px 14px;border-radius:8px;border:none;background:#06b6d4;color:#032026;cursor:pointer;font-weight:600}
  #meta{font-size:12px;color:#9fb6c8;margin-bottom:8px}
  .suggest{margin-top:6px;font-size:13px;color:#f0f9ff}
  .suggest button{margin-left:8px;padding:6px 9px;border-radius:6px;border:none;background:#ffd369;color:#1b1b1b;cursor:pointer}
  a.link{color:#ffd369;text-decoration:none}
</style>
</head>
<body>
<div id="chatbox">
  <div id="meta">MiniGPT — نسخه فایل تک (مسیرهای زیاد). برای خروج بنویس "خروج".</div>
  <div id="messages"></div>
  <div id="inputArea">
    <input id="userInput" placeholder="پیام را بنویس و Enter بزن..." />
    <button id="sendBtn">ارسال</button>
  </div>
</div>

<script>
// ------ پاسخ‌ها (حجم بزرگ) ------
// من تعداد زیادی مسیر قرار دادم؛ می‌تونی بعدا خودت اضافه/ویرایش کنی.
const responses = {
  "سلام": "سلام! چطور می‌تونم کمکتون کنم؟",
  "درود": "درود! چه کمکی از دستم برمیاد؟",
  "سلام چطوری": "من خوبم؛ شما چطورید؟",
  "صبح بخیر": "صبح بخیر! روز خوبی داشته باشید.",
  "عصر بخیر": "عصر بخیر! امیدوارم آرام باشید.",
  "شب بخیر": "شب بخیر؛ خواب‌های شیرین!",
  "خداحافظ": "خداحافظ! خوشحال می‌شم دوباره ببینمت.",
  "مرسی": "خواهش می‌کنم! اگر باز هم خواستی بپرس.",
  "ممنون": "قابلی نداشت؛ خوشحالم کمک کردم.",
  "اسم تو چیه": "اسم من MiniGPT هست؛ یک مدل مسیرمند ساخته شده برای گفتگو.",
  "چه کار میکنی": "فعلاً منتظرم تا بهت کمک کنم — بپرس هرچی خواستی!",
  "چیکار میتونی بکنی": "می‌تونم سوال‌ها رو جواب بدم، مسیرها رو تشخیص بدم، و پیشنهاد نزدیک‌ترین جواب رو بدم.",
  "چه کمکی میتونی بکنی": "از راهنمایی فنی تا شوخی و آموزش، هر چیزی که توی مسیرها داشته باشم.",
  "یه جوک بگو": "جوک: چرا برنامه‌نویس‌ها همیشه گیج‌اند؟ چون همیشه دنبال باگ می‌گردند!",
  "یه جوک دیگه": "چرا کتاب تاریخ همیشه خسته است؟ چون گذشته‌اش سنگینه!",
  "حالت چطوره": "من عالی‌ام؛ انرژی‌ام از شماست—حالتون چطوره؟",
  "خسته شدم": "یه استراحت کوتاه بکن، یه لیوان آب بخور یا چشم‌هات رو ببند.",
  "دلگیره": "اوضاع سخت می‌گذره؛ اگه خواستی بگو چی شده شاید بشه کمک کرد.",
  "کمک": "چطور می‌تونم کمک کنم؟ مشکل رو بگو دقیق‌تر.",
  "کمک فنی": "مشکل فنی چی هست؟ خطا، نصب، یا کد؟",
  "مشکل با کد": "کد رو بفرست یا خطایی که می‌بینی رو بنویس تا بررسی کنم.",
  "راهنمای نصب": "چه چیزی می‌خوای نصب کنی؟ سیستم‌عامل و نسخه رو بگو.",
  "خطای 404": "خطای 404 یعنی صفحه مورد نظر پیدا نشد—آدرس رو چک کن یا رفرش کن.",
  "خطای 500": "خطای 500 خطای سروریه؛ لطفاً بعداً دوباره امتحان کن یا لاگ سرور رو بررسی کن.",
  "رفع باگ": "شرح باگ و بخش مرتبط از کد رو بده؛ من کمک می‌کنم تحلیل کنیم.",
  "آموزش جاوا": "می‌خوای از پایه یاد بگیری یا پروژه‌ای خاص داری؟",
  "آموزش پایتون": "پایتون عالیه برای شروع؛ می‌خوای با متغیرها شروع کنیم؟",
  "آموزش جاوااسکریپت": "جاوااسکریپت برای فرانت‌اند و بک‌اند مفیده؛ چی مدنظرت هست؟",
  "چطور وب‌سایت بسازم": "برای شروع HTML و CSS یاد بگیر؛ بعد JS و در صورت نیاز فریم‌ورک.",
  "چطور اپلیکیشن بسازم": "پلتفرم هدف رو بگو (اندروید، iOS، وب) تا راهنمایی دقیق بدم.",
  "پیشنهاد پروژه": "یه اپ یادگیری زبان، یه مدیریت مخزن کارها یا یه ربات تلگرام می‌تونه جالب باشه.",
  "موسیقی پیشنهاد بده": "ژانر مورد علاقه‌ات چیه؟ پاپ، راک، الکترونیک یا کلاسیک؟",
  "فیلم خوب": "چه ژانری دوست داری؟ من چندتا فیلم پیشنهادی دارم برای هر ژانر.",
  "کتاب خوب": "می‌خوای توسعه فردی، رمان، یا کتاب فنی؟",
  "سرگرمی": "می‌خوای بازی، پازل، یا تمرین ذهنی؟ پیشنهاد می‌دم.",
  "ورزش کن": "یه پیاده‌روی ۲۰ دقیقه‌ای یا چند حرکت کششی ساده حال رو بهتر می‌کنه.",
  "رژیم": "می‌خوای کاهش وزن، افزایش وزن یا رژیم سالم؟ شرایطت رو بگو.",
  "طرز تهیه غذا": "چه غذایی؟ من دستور پخت ساده و مواد لازم بهت می‌دم.",
  "قهوه درست کن": "قهوه‌ساز یا ساده؟ میزان قهوه و آب رو بگو تا راهنمایی کنم.",
  "سفر": "کدوم شهر یا کشور؟ بودجه و مدت زمان رو بگو تا پیشنهاد بدم.",
  "بلیط هواپیما": "برای جستجوی قیمت باید از سرویس‌های آنلاین استفاده کنی؛ می‌خوای راهنمایی کنم چطور ارزان‌تر بگیری؟",
  "هتل خوب": "بودجه و شهر رو بگو تا فیلتر مناسب پیشنهاد بدم.",
  "آب و هوا": "من آنلاین نیستم تا وضعیت زنده رو بگم—اما راهنمایی چک کردن منابع رو می‌دم.",
  "تاریخ امروز": (new Date()).toLocaleDateString('fa-IR'),
  "وقت فعلی": (new Date()).toLocaleTimeString('fa-IR'),
  "چند روز تا عید": "من نمی‌دونم منظورت کدوم عیده؛ تاریخ مدنظر رو بدی حساب می‌کنم.",
  "ریاضی ساده": "می‌تونی عملگرها رو بنویسی مثل: 2+2 یا 12*5",
  "محاسبه": "فرمول یا عبارت ریاضی رو بنویس تا محاسبه کنم.",
  "تبدیل واحد": "چه واحدی؟ طول، وزن، زمان یا ارز؟",
  "واژه‌نامه": "کلمه‌ای که می‌خوای معنی‌اش رو بدونی بگو.",
  "ترجمه انگلیسی": "متن فارسی رو بفرست تا ترجمه انگلیسی‌ش رو بدم.",
  "ترجمه فارسی": "متن انگلیسی رو بفرست تا من فارسی‌ش کنم.",
  "نکات امنیتی": "برای امنیت حساب، از رمز دو مرحله‌ای و رمز قوی استفاده کن.",
  "ذخیره‌سازی": "برای بکاپ گرفتن از فایل‌ها از سرویس ابری یا هارد اکسترنال استفاده کن.",
  "git راهنما": "درخواستت رو مشخص کن: init، commit، push یا branch؟",
  "git commit": "یک پیام کوتاه و توصیفی برای commit بنویس، مثلا `fix/login-bug`.",
  "docker راهنما": "می‌خوای یک کانتینر بسازی یا ایمیج؟ Dockerfile رو بفرست اگر می‌خوای بررسی کنم.",
  "npm install": "اگر بسته خاصی مدنظرت هست نامشو بگو، یا `npm install <package>` رو اجرا کن.",
  "html آموزش": "تگ‌های پایه مثل `<html>`, `<head>`, `<body>` و `<div>` شروع خوبی هستند.",
  "css آموزش": "برای استایل‌دهی از انتخابگرها، کلاس‌ها و خواص مثل `display`, `flex` استفاده کن.",
  "js آموزش": "از کنسول برای دیباگ استفاده کن: `console.log('hello')`",
  "api چیست": "API رابطی است که دو برنامه با هم صحبت می‌کنند؛ معمولاً درخواست و پاسخ JSON است.",
  "rest چیست": "REST یک سبک معماری برای APIهاست که از HTTP verbs استفاده می‌کند.",
  "graphql چیست": "GraphQL زبان پرس‌و‌جو برای APIهاست که اجازه می‌دهد فقط داده مطلوبة برگردد.",
  "پرسش امنیتی": "سوال امنیتی معمولاً برای بازیابی حساب استفاده می‌شود؛ سعی کن پاسخ راوی حفظ باشی.",
  "پسورد قوی": "ترکیبی از حروف بزرگ/کوچک، اعداد و نمادها و حداقل ۱۲ کاراکتر امن‌تر است.",
  "آنتی‌ویروس": "یک آنتی‌ویروس شناخته‌شده نصب کن و همیشه به‌روز باشه.",
  "backup": "بکاپ مرتب بگیر و حداقل دو نسخه در مکان‌های مختلف نگهدار.",
  "حریم خصوصی": "داده‌های حساس رو با رمزنگاری ذخیره کن و از اشتراک‌گذاری بی‌مورد خودداری کن.",
  "سوال عمومی": "هر سوالی داری، واضح و کوتاه بپرس تا بهتر جواب بدم.",
  "نحوه یادگیری": "کار عملی کن، پروژه کوچک بساز و مستمر یاد بگیر.",
  "تمرین برنامه‌نویسی": "روزانه ۳۰ تا ۶۰ دقیقه کد بزن و چالش‌های کوچک حل کن.",
  "تکنیک مطالعه": "پومودورو (۲۵ دقیقه کار، ۵ دقیقه استراحت) موثره.",
  "مدیریت زمان": "لیست کارها، اولویت‌بندی و زمان‌بندی روزانه موثره.",
  "مصرف انرژی": "برای افزایش تمرکز از خواب کافی و ورزش سبک کمک بگیر.",
  "اختلال تمرکز": "محیط بدون مزاحم، زمان‌بندی و استراحت‌های کوتاه کمک می‌کنه.",
  "موسیقی برای تمرکز": "موسیقی بدون کلام یا صدای محیطی معمولاً مفیده.",
  "ایده استارتاپ": "یک سرویس محلی که مشکل واقعی مردم رو حل کنه، ایده خوبی‌ست.",
  "طرح کسب و کار": "مشخص کن مشکل، راه‌حل، مشتری هدف و مدل درآمدی.",
  "نوشتن رزومه": "خلاصه تجربه، مهارت‌های کلیدی، نمونه کار و تحصیلات رو واضح بنویس.",
  "مصاحبه کاری": "مثال‌های قبلی از موفقیت‌ها و چالشی که برطرف کردی آماده کن.",
  "مهارت‌های نرم": "ارتباط، همکاری تیمی و حل مسئله بسیار مهم هستند.",
  "پرزنت خوب": "اسلایدها ساده، مثال‌ها عملی و زمان‌بندی رعایت شده باشه.",
  "آمادگی آزمون": "سوالات نمونه زیاد حل کن و نقاط ضعف رو مشخص کن.",
  "نحوه نوشتن ایمیل": "موضوع واضح، متن مختصر، امضای کامل و ادبیات محترمانه.",
  "پاسخ به انتقاد": "آرام باش، گوش بده و راهکارهای بهبود پیشنهاد کن.",
  "مدیریت خشم": "نفس عمیق، فاصله گرفتن کوتاه و بیان احساس در شرایط مناسب.",
  "کمبود خواب": "سعی کن الگوی خواب ثابت داشته باشی و از کافئین دیر شب پرهیز کن.",
  "آسیب‌دیدگی سر": "اگر علائم جدی هست حتماً به پزشک مراجعه کن؛ این فقط راهنمایی عمومی است.",
  "تمرینات کششی": "هر ساعت ۵ دقیقه حرکات کششی ساده برای پشت و گردن انجام بده.",
  "یوگا": "یوگا برای انعطاف‌پذیری و کاهش استرس مفیده؛ تمرینات ساده رو امتحان کن.",
  "مدیتیشن": "روزانه ۵ تا ۱۰ دقیقه مدیتیشن تمرکز رو بالا می‌بره.",
  "سلامت روان": "صحبت با دوستان یا مشاور در شرایط سخت کمک‌کننده است.",
  "کنترل استرس": "تنفس عمیق، برنامه‌ریزی و خواب کافی موثر هستند.",
  "نکات تغذیه": "متنوع بخور، میوه و سبزیجات رو فراموش نکن و آب کافی بنوش.",
  "مواد مغذی": "پروتئین، ویتامین‌ها و املاح برای سلامت ضروری هستند.",
  "آب کافی": "هر روز سعی کن حداقل ۶ تا ۸ لیوان آب بنوشی (بسته به شرایط).",
  "طرز تهیه پلو": "برنج رو بشور، با نمک و روغن بخیـز، برای دستور کامل بگو چه مدل پلو می‌خوای.",
  "دستور املت": "تخم‌مرغ + نمک + فلفل + روغن؛ در تابه سرخ کن و مواد دلخواه رو اضافه کن.",
  "پیتزا خانگی": "خمیر، سس گوجه، پنیر و تاپینگ‌ها؛ ۲۰ دقیقه در فر ۲۲۰ درجه.",
  "صبحانه سالم": "حاوی پروتئین، کربوهیدرات پیچیده و میوه باشه؛ مثلاً جو با میوه و ماست.",
  "نحوه پاک کردن ویندوز": "بکاپ بگیر، نصب مجدد از طریق USB یا ISO انجام بده.",
  "افزایش سرعت ویندوز": "استارت‌آپ‌ها رو کم کن، دیسک را پاک کن و آپدیت کن.",
  "اندروید ریست": "قبل از ریست بکاپ بگیر؛ از تنظیمات > پشتیبان‌گیری و بازنشانی اقدام کن.",
  "آیفون مشکل": "نسخه iOS و جزئیات مشکل رو بگو تا راهنمایی کنم.",
  "صفحه آبی": "BSOD معمولاً به درایور یا سخت‌افزار مربوطه؛ کد خطا رو ارسال کن.",
  "تعمیر موبایل": "شرح مشکل، مدل و سیستم عامل رو بگو تا راهنمایی دقیق بدم.",
  "چطور عکس بفرستم": "در این نسخه فایل‌پیوست که آپلود نشه پشتیبانی نمی‌شه، متن رو بفرست.",
  "ذخیره چت": "می‌تونی متن رو کپی کنی؛ آینده قابلیت ذخیره داخلی هم اضافه می‌کنیم.",
  "اضافه کردن مسیر": "الان امکان اضافه از رابط وجود نداره اما می‌تونی فایل HTML را ویرایش کنی و مسیرها اضافه کنی.",
  "حافظه": "این نسخه حافظه نشست (session) داره؛ برای حافظه دائمی نیاز به ذخیره‌سازی داریم.",
  "آیا میتونی یاد بگیری": "در نسخه فعلی یادگیری خودکار فعال نیست؛ اما می‌تونیم مکانیزم افزودن مسیر دستی بسازیم.",
  "اضافه کن": "اگر می‌خوای یک مسیر جدید اضافه کنم، عبارت و پاسخ را اینجا بگو.",
  "مثال اضافه": "مثال: `سلام پرهام` => `سلام پرهام عزیز! چطور می‌تونم کمک کنم؟`",
  "فایل html": "دقیقاً همین فایل HTML که باز کردی، محتوای مسیرها را نگهداری می‌کنه.",
  "نسخه آفلاین": "این فایل کاملاً آفلاین کار می‌کنه و نیازی به اینترنت نداره.",
  "پرفورمنس": "هر چه مسیرها بیشتر بشن، جستجو کمی کندتر میشه؛ اما با الگوریتم فعلی تا چند هزار مسیر قابل قبول کار می‌کنه.",
  "بهینه‌سازی": "برای بهبود می‌تونیم از ساختار درختی (trie) یا شاخص‌بندی استفاده کنیم.",
  "خروج": "تا بعد! برای بازگشت فقط صفحه رو رفرش کن یا فایل رو دوباره باز کن.",
  "تشکر رسمی": "از شما بابت توجه و وقتی که گذاشتید ممنونم.",
  "تشکر دوستانه": "مرسی رفیق! خوشحالم کمکت کردم.",
  "الان چیکار کنم": "بگو هدفت چیه تا قدم بعدی رو پیشنهاد بدم.",
  "پیشنهاد کار": "رویکرد قدم به قدم: هدف -> منابع -> برنامه روزانه -> اجرا.",
  "هدف گذاری": "اهداف کوچک و قابل اندازه‌گیری بگذار؛ هر هفته یک پیشرفت کوچک.",
  "انگیزه": "دلیل اصلیت رو بنویس و هر روز چند دقیقه بهش نگاه کن.",
  "خلاصه کن": "متنی داری؟ ارسال کن تا خلاصه‌ش کنم.",
  "ترجمه خلاصه": "متن رو بفرست؛ من اول خلاصه می‌کنم سپس ترجمه رو انجام میدم.",
  "نوشتن ایمیل حرفه‌ای": "موضوع، مخاطب، هدف و نکات کلیدی رو بگو تا قالب ایمیل رو بنویسم.",
  "ساختار مقاله": "مقدمه، بدنه (نکات کلیدی)، نتیجه‌گیری و منابع.",
  "نوشتن رپورتاژ": "عنوان جذاب، پاراگراف اول قوی و کال‌تو‌اکشن در پایان داشته باش.",
  "پلان پروژه": "مراحل، زمان‌بندی، منابع و ریسک‌ها رو فهرست کن.",
  "قیمت گذاری": "تحقیق بازار، هزینه‌ها و حاشیه سود مورد انتظار را محاسبه کن.",
  "سوال ریاضی": "سوال ریاضی رو بنویس تا مرحله به مرحله حل کنم.",
  "حل معادله": "معادله را وارد کن؛ من سعی می‌کنم حلش کنم.",
  "آموزش SQL": "می‌خوای SELECT ساده یا JOIN و پیچیده‌تر؟ بگو تا مثال بدم.",
  "پرسش امنیت شبکه": "نوع شبکه و تجهیزات رو بگو تا راهنمایی عملی بدم.",
  "ویروس یاب اندروید": "از منابع معتبر دانلود کن و مجوزها رو چک کن.",
  "فضای ابری": "برای فایل‌ها Google Drive و برای پروژه‌ها GitHub مناسب هستند.",
  "نصب لینوکس": "دبیان/اوبونتو برای شروع مناسبند؛ آیا تجربه قبلی داری؟",
  "آموزش bash": "دستورات پایه: ls, cd, cp, mv, rm, chmod, chown.",
  "الگوریتم ها": "کدام الگوریتم؟ مرتب‌سازی، جستجو یا گراف؟",
  "ساختار داده": "آرایه، لیست پیوندی، درخت، گراف، جدول هش—کدوم مدنظرته؟",
  "مسئله برنامه‌نویسی": "مسئله رو چک کن و نمونه ورودی/خروجی رو بده.",
  "آموزش regex": "الگوها رو بگو تا عبارت منظم مناسب بنویسم.",
  "فریم‌ورک وب": "React و Vue برای فرانت؛ Express یا Django برای بک‌اند.",
  "وب‌سایت استاتیک": "فایل‌های HTML/CSS و جاوااسکریپت کافی‌اند؛ GitHub Pages مناسبِ میزبانی.",
  "هاست رایگان": "GitHub Pages برای استاتیک، Netlify و Vercel هم گزینه‌های خوب‌اند.",
  "سرور رایگان": "AWS/GCP/Azure معمولا رایگان نیستند، اما لایه رایگان محدود دارند.",
  "آموزش React": "کامپوننت‌ها، props و state رو یاد بگیر؛ بعد Hooks مثل useState و useEffect.",
  "آموزش Vue": "Vue سه سطح داره: Options API، Composition API و Vite به‌عنوان ابزار.",
  "آموزش Flutter": "برای اپ کراس‌پلتفرم؛ دارت یاد بگیر و بعد ویجت‌ها.",
  "آموزش Kotlin": "برای اپ اندروید مدرن استفاده می‌شه؛ شروع با syntax پایه خوبه.",
  "آموزش Swift": "برای iOS؛ SwiftUI راه ساده‌تری برای UI هست.",
  "پروژه نمونه": "رزومه‌ساز آنلاین، مدیریت وظایف یا چت ساده پروژه‌های مناسبی هستند.",
  "قالب وبلاگ": "خوانا، ریسپانسیو و با تایپوگرافی مناسب باشه.",
  "seo": "محتوای با کیفیت، متا تگ‌ها و سرعت بارگذاری مهم‌اند.",
  "load testing": "ابزارهایی مثل JMeter یا k6 برای تست بار مناسبت هستند.",
  "ci/cd": "پایپلاین برای تست و دیپلوی خودکار توصیه می‌شود.",
  "unit test": "تست واحد برای قطعه‌های کوچکِ کد ضروری است.",
  "integration test": "برای بررسی تعامل بین ماژول‌ها استفاده می‌شود.",
  "deployment": "از کانتینر یا سرور مجازی استفاده کن، اتوماسیون داشته باش.",
  "monitoring": "Prometheus، Grafana یا سرویس‌های مدیریتی برای مانیتورینگ مفیدن.",
  "log analysis": "لگ‌ها را متمرکز کن و از ابزار APM برای مانیتورینگ استفاده کن.",
  "api testing": "Postman یا curl برای تست اولیه عالی‌اند.",
  "auth": "OAuth2 یا JWT برای احراز هویت در APIها معمولند.",
  "rate limit": "برای جلوگیری از سوءاستفاده، نرخ درخواست را محدود کن.",
  "cache": "Redis یا حافظه داخلی برای افزایش سرعت استفاده می‌شود.",
  "database": "SQL برای معاملات پیچیده، NoSQL برای داده‌های منعطف.",
  "migrate db": "قبل از مهاجرت بکاپ بگیر و در محیط تست آزمایش کن.",
  "backup db": "زمان‌بندی منظم و نگهداری چند نسخه توصیه می‌شود.",
  "optimize query": "ایندکس‌گذاری، استفاده از EXPLAIN و بهینه‌سازی JOINها.",
  "security headers": "Content-Security-Policy و X-Frame-Options را تنظیم کن.",
  "rate limiting": "از میانگین، سقف و الگوریتم توکن‌باكِت استفاده کن.",
  "captcha": "برای جلوگیری از ربات‌ها reCAPTCHA یا حل CAPTCHA سفارشی استفاده کن.",
  "email sending": "از سرویس‌هایی مثل SendGrid یا SMTP معتبر استفاده کن.",
  "sms sending": "سرویس‌های محلی یا بین‌المللی مثل Twilio برای ارسال پیامک.",
  "payment gateway": "Stripe، PayPal یا در ایران زرین‌پال/درگاه‌های بانکی.",
  "product MVP": "چند ویژگی کلیدی انتخاب کن، سریع منتشر کن و بازخورد بگیر.",
  "user feedback": "فرم ساده یا ایمیل برای گرفتن بازخورد کاربران.",
  "analytics": "Google Analytics یا ابزارهای متن‌باز برای آمارگیری استفاده کن.",
  "error reporting": "Sentry یا ابزار مشابه برای گزارش خطاها مفیده.",
  "logging format": "JSON برای پردازش ماشینی بهتر است.",
  "cli tools": "برای خودت یک CLI ساده با Node.js یا Python بساز.",
  "automation": "تسک‌های تکراری رو با اسکریپت اتومات کنی وقت ذخیره می‌کنی.",
  "productivity tip": "یک کار مهم را اول روز انجام بده تا پیشرفت حس بشه.",
  "motivation tip": "پاداش کوچک بعد از تکمیل هر وظیفه بگذار.",
  "focus tip": "اعلان‌ها را خاموش کن و زمان‌بندی دقیق داشته باش.",
  "creativity": "ایده‌ها رو یادداشت کن و بعدا ترکیب‌شون کن.",
  "brainstorm": "قوانین قضاوت را حذف کن و همه ایده‌ها را ثبت کن.",
  "teamwork": "شفافیت و تقسیم وظایف باعث موفقیت تیم می‌شه.",
  "remote work": "جلسات کوتاه و ابزارهای مدیریت کار کمک می‌کنه.",
  "hiring tip": "برای مصاحبه تکنیکی، نمونه کاری و تست کوچک طراحی کن.",
  "onboarding": "مستندات واضح و دسترسی‌های لازم برای شروع مطلوبه.",
  "customer support": "پاسخ‌گویی سریع و ثبت مشکل باعث رضایت می‌شه.",
  "crm": "مدیریت مشتری‌ها با CRM مناسب روند کسب‌وکار را ساده می‌کنه.",
  "legal": "برای مسائل حقوقی از مشاور حقوقی کمک بگیر.",
  "accounting": "ثبت هزینه و درآمد رو منظم نگه دار.",
  "tax": "اطلاعات مالی و قوانین محلی برای مالیات مهم هستند.",
  "freelance tip": "نمونه کار قوی و قیمت رقابتی برای شروع مفیده.",
  "pricing tip": "ارزش پیشنهادی و بازار هدف را در قیمت‌گذاری لحاظ کن.",
  "customer retention": "ارزش افزوده و پشتیبانی قوی نگه‌داشت مشتری رو افزایش می‌ده.",
  "growth hack": "آماده‌سازی محتوای ویروسی و استفاده از referrals موثره.",
  "marketing plan": "هدف، پیام، کانال و بودجه رو مشخص کن.",
  "social media": "محتوای منظم و تعامل با دنبال‌کننده‌ها مهمه.",
  "ads": "آزمایش A/B و تنظیم هدف‌گذاری دقیق باعث بهبود نتیجه می‌شه.",
  "seo tip": "کلمات کلیدی، لینک‌سازی و تجربه کاربری را جدی بگیر.",
  "smm tip": "محتوای باکیفیت و زمان‌بندی مناسب انتشار داشته باش.",
  "email marketing": "موضوع جذاب و محتوای ارزشمند نرخ باز شدن ایمیل رو افزایش می‌ده.",
  "growth metrics": "CAC، LTV، churn و نرخ تبدیل را دنبال کن.",
  "support channels": "چت، ایمیل و تلفن رو بسته به نیاز کاربران فعال کن.",
  "knowledge base": "مقالات آموزشی و faq زمان تیم پشتیبانی را کم می‌کنه.",
  "onboarding ux": "اولین تجربه کاربر باید ساده و واضح باشه.",
  "pricing model": "اشتراکی، پرداخت یکبار یا فریمیوم—هر کدوم معایب و مزایای خودش رو داره.",
  "legal privacy": "پالیسی حفظ حریم خصوصی رو بنویس و به کاربران اطلاع بده.",
  "gdpr": "اگر با کاربران EU کار می‌کنی، قوانین GDPR را رعایت کن.",
  "cookies": "اطلاع‌رسانی و رضایت برای کوکی‌ها نیاز است."
};

// ------ Levenshtein with length-based threshold ------
function levenshtein(a,b){
  a = String(a).trim().toLowerCase();
  b = String(b).trim().toLowerCase();
  const n=a.length, m=b.length;
  if(n===0) return m;
  if(m===0) return n;
  let dp = Array(n+1).fill(0).map(()=>Array(m+1).fill(0));
  for(let i=0;i<=n;i++) dp[i][0]=i;
  for(let j=0;j<=m;j++) dp[0][j]=j;
  for(let i=1;i<=n;i++){
    for(let j=1;j<=m;j++){
      dp[i][j] = a[i-1]===b[j-1] ? dp[i-1][j-1] : 1 + Math.min(dp[i-1][j-1], dp[i-1][j], dp[i][j-1]);
    }
  }
  return dp[n][m];
}

function findBestMatch(input){
  input = String(input).trim().toLowerCase();
  if(!input) return null;
  let best=null, bestScore=Infinity;
  for(const key in responses){
    const dist = levenshtein(input, key);
    // threshold: حداکثر بین 2 تا Math.ceil(30% طول)
    const maxAllowed = Math.max(2, Math.ceil(Math.max(input.length, key.length) * 0.30));
    if(dist < bestScore && dist <= maxAllowed){
      bestScore = dist; best = key;
    } else if(dist < bestScore){
      // keep but not necessarily allowed
      bestScore = dist; best = key;
    }
  }
  return {key: best, dist: bestScore};
}

function addMessage(text, cls){
  const div = document.createElement('div');
  div.className = 'msg ' + cls;
  div.innerText = text;
  document.getElementById('messages').appendChild(div);
  document.getElementById('messages').scrollTop = document.getElementById('messages').scrollHeight;
}

// ارسال پیام و منطق پاسخ
function handleInput(raw){
  const input = String(raw || '').trim();
  if(!input) return;
  addMessage(input, 'user');

  if(input === 'خروج'){
    addMessage(responses['خروج'] || 'خروج انجام شد.', 'bot');
    return;
  }

  // اگر عبارت دقیقا وجود داشت
  if(responses.hasOwnProperty(input)){
    const r = responses[input];
    addMessage(typeof r === 'function' ? r() : r, 'bot');
    return;
  }

  // fuzzy match
  const match = findBestMatch(input);
  if(match && match.key && match.dist <= Math.max(2, Math.ceil(input.length*0.30))){
    const ans = responses[match.key];
    addMessage((typeof ans === 'function' ? ans() : ans) + `\n\n(من فهمیدم که منظورت احتمالا: "${match.key}" بوده)`, 'bot');
    return;
  }

  // اگر هیچ چیز مناسب نبود: پیشنهاد نزدیک‌ترین گزینه و دکمه قبول
  // پیدا کردن 3 نزدیک‌ترین
  const scores = [];
  for(const k in responses){
    scores.push({k, d:levenshtein(input,k)});
  }
  scores.sort((a,b)=>a.d-b.d);
  const top = scores.slice(0,3).map(s=>s.k);

  const msg = document.createElement('div');
  msg.className = 'msg bot';
  msg.innerText = "متأسفانه من پاسخ دقیقی برای سوال شما ندارم. نزدیک‌ترین گزینه‌ها:";
  const sug = document.createElement('div');
  sug.className = 'suggest';
  top.forEach(t=>{
    const b = document.createElement('button');
    b.textContent = t;
    b.addEventListener('click', ()=>{ addMessage(t,'user'); handleInput(t); });
    sug.appendChild(b);
  });
  msg.appendChild(sug);
  document.getElementById('messages').appendChild(msg);
  document.getElementById('messages').scrollTop = document.getElementById('messages').scrollHeight;
}

document.getElementById('sendBtn').addEventListener('click', ()=>{
  const v = document.getElementById('userInput').value;
  document.getElementById('userInput').value = '';
  handleInput(v);
});
document.getElementById('userInput').addEventListener('keypress', (e)=>{
  if(e.key==='Enter'){
    e.preventDefault();
    document.getElementById('sendBtn').click();
  }
});

// خوش‌آمدگویی اولیه
addMessage("سلام! من یک نسخه فایل‌تک با مسیرهای زیاد هستم — هر چی خواستی بنویس.", 'bot');
</script>
</body>
</html>
